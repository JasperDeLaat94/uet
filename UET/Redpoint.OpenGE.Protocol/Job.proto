syntax = "proto3";

package Redpoint.OpenGE.Protocol;

import "Process.proto";

message SubmitJobRequest {
	string buildNodeName = 1;
	string jobXml = 2;
	map<string, string> environmentVariables = 3;
	string workingDirectory = 4;
}

enum JobCompletionStatus {
	Unknown = 0;
	Success = 1;
	Failure = 2;
	Cancelled = 3;
}

message JobCompleteResponse {
	JobCompletionStatus status = 1;
	int32 exitCode = 2;
	double totalSeconds = 3;
}

message JobResponse {
	oneof response {
		JobCompleteResponse jobComplete = 1;
	}
}

service JobApi {
	rpc SubmitJob(SubmitJobRequest) returns (stream JobResponse) {}
}